<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì‚¬ì§„ ì—…ë¡œë“œ</title>
  <style>
    body {
      font-family: 'Inter', sans-serif; /* Inter í°íŠ¸ ì‚¬ìš© */
      text-align: center;
      padding: 40px;
      background-color: #f0f4f8; /* ë¶€ë“œëŸ¬ìš´ ë°°ê²½ìƒ‰ */
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh; /* ì „ì²´ í™”ë©´ ë†’ì´ ì‚¬ìš© */
      margin: 0;
    }
    h1 {
      font-size: 3em; /* í—¤ë” í¬ê¸° ì¦ê°€ */
      color: #6A1B9A; /* ë©”ì¸ í…Œë§ˆ ìƒ‰ìƒ */
      margin-bottom: 20px;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }
    p {
      font-size: 1.2em; /* ë¬¸ë‹¨ í…ìŠ¤íŠ¸ í¬ê¸° ì¦ê°€ */
      margin-bottom: 30px;
      color: #555;
    }
    form {
      background-color: #ffffff;
      padding: 40px;
      border-radius: 20px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      box-shadow: 0 10px 30px rgba(0,0,0,0.1); /* ê·¸ë¦¼ì íš¨ê³¼ */
      width: 90%; /* ë„ˆë¹„ ì¡°ì • */
      max-width: 500px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    input[type="file"] {
      font-size: 1.2em; /* íŒŒì¼ ì„ íƒ ë²„íŠ¼ í°íŠ¸ í¬ê¸° ì¦ê°€ */
      margin-top: 20px;
      padding: 15px; /* íŒ¨ë”© ì¶”ê°€ */
      border: 2px solid #00BCD4; /* í…Œë§ˆì— ë§ëŠ” í…Œë‘ë¦¬ ìƒ‰ìƒ */
      border-radius: 10px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      width: 100%; /* ë„ˆë¹„ ê½‰ ì±„ìš°ê¸° */
      box-sizing: border-box; /* íŒ¨ë”©ì´ ë„ˆë¹„ì— í¬í•¨ë˜ë„ë¡ */
    }
    input[type="submit"] {
      font-size: 1.8em; /* ì œì¶œ ë²„íŠ¼ í°íŠ¸ í¬ê¸° ëŒ€í­ ì¦ê°€ */
      margin-top: 40px; /* ìœ„ìª½ ì—¬ë°± ì¦ê°€ */
      padding: 20px 40px; /* íŒ¨ë”© ëŒ€í­ ì¦ê°€ */
      background-color: #FFC107; /* ê°•ì¡° ìƒ‰ìƒ */
      color: #6A1B9A; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
      border: none;
      border-radius: 30px; /* ë§¤ìš° ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      cursor: pointer;
      transition: all 0.3s ease; /* í˜¸ë²„ íš¨ê³¼ë¥¼ ìœ„í•œ ì „í™˜ */
      box-shadow: 0 8px 15px rgba(0,0,0,0.2); /* ê·¸ë¦¼ì íš¨ê³¼ */
      font-weight: bold;
      width: 100%; /* ë„ˆë¹„ ê½‰ ì±„ìš°ê¸° */
      max-width: 300px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
    }
    input[type="submit"]:hover {
      background-color: #FFD54F; /* í˜¸ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
      box-shadow: 0 12px 20px rgba(0,0,0,0.3); /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ì ê°•í™” */
      transform: translateY(-3px); /* ì•½ê°„ ìœ„ë¡œ ì´ë™ */
    }
    #result {
      margin-top: 30px; /* ê²°ê³¼ ë©”ì‹œì§€ ìœ„ìª½ ì—¬ë°± ì¦ê°€ */
      font-size: 1.5em; /* ê²°ê³¼ ë©”ì‹œì§€ í°íŠ¸ í¬ê¸° ì¦ê°€ */
      font-weight: bold;
    }
    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 600px) {
      body {
        padding: 20px;
      }
      h1 {
        font-size: 2.5em;
      }
      p {
        font-size: 1em;
      }
      input[type="file"], input[type="submit"] {
        font-size: 1.5em;
        padding: 15px 30px;
      }
      input[type="submit"] {
        max-width: 250px;
      }
    }
  </style>
  <!-- Google Fonts Inter ë¡œë“œ (ì„ íƒ ì‚¬í•­, í•„ìš”ì‹œ ì£¼ì„ í•´ì œ) -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet"> -->
</head>
<body>
  <h1>ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</h1>
  <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‚¬ì§„ì„ ì„ íƒí•˜ê³  ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</p>

  <form id="uploadForm">
    <input type="file" name="file" accept="image/*" required><br>
    <input type="submit" value="ì‚¬ì§„ ì—…ë¡œë“œ">
  </form>

  <div id="result" style="margin-top:20px;"></div>

  <script>
    const form = document.getElementById("uploadForm");
    const resultDiv = document.getElementById("result");

    const urlParams = new URLSearchParams(window.location.search);
    const txId = urlParams.get("tx_id");
    const clientId = urlParams.get("client_id") || "kiosk01";

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const fileInput = form.querySelector("input[type='file']");
      const file = fileInput.files[0];
      if (!file) {
        resultDiv.innerHTML = "<b style='color:orange;'>âš ï¸ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</b>";
        return;
      }

      const formData = new FormData();
      formData.append("file", file);
      formData.append("tx_id", txId); 
      formData.append("client_id", clientId);
      formData.append("method", "preset");
      formData.append("output_format", "original");

      resultDiv.innerHTML = "<b style='color:#6A1B9A;'>â³ ì—…ë¡œë“œ ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</b>"; // ì—…ë¡œë“œ ì¤‘ ë©”ì‹œì§€
      
      try {
        const res = await fetch("https://api.lumina-core.store/upload/photo", {
          method: "POST",
          body: formData
        });

        if (res.ok) {
          resultDiv.innerHTML = "<b style='color:green;'>âœ… ì—…ë¡œë“œ ì™„ë£Œ! í‚¤ì˜¤ìŠ¤í¬ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì„¸ìš”.</b>";
        } else {
          const error = await res.text();
          resultDiv.innerHTML = `<b style='color:red;'>âŒ ì˜¤ë¥˜: ${res.status} - ${error}</b>`;
        }
      } catch (err) {
        resultDiv.innerHTML = `<b style='color:red;'>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${err}</b>`;
      }
    });
  </script>
</body>
</html>
